import{_ as d,b as a,a as u,d as c,t as l,o as i}from"./index-B6tcRC6e.js";const g={data(){return{loading:!0,error:null,message:"Processing login...",apiBaseUrl:"http://localhost:5000"}},created(){const t=new URLSearchParams(window.location.search),s=t.get("token");if(s){localStorage.setItem("access_token",s),localStorage.setItem("is_authenticated","true"),console.log("Authentication token stored from callback"),this.message="Authentication successful! Redirecting...";const r=localStorage.getItem("login_redirect")||"/";localStorage.removeItem("login_redirect"),setTimeout(()=>{this.$router.push(r)},1e3)}else{const r=t.get("code"),o=t.get("error");if(o)console.error("Authentication error:",o),this.error=`Authentication error: ${o}`,this.loading=!1,this.message="Authentication failed",setTimeout(()=>{this.$router.push(`/login?error=${encodeURIComponent(o)}`)},2e3);else if(r){console.log("Received OAuth code, redirecting to backend for processing"),this.message="Processing OAuth callback...",console.log(`Using API base URL for callback: ${this.apiBaseUrl}`);const e=Array.from(t.entries()).map(([n,h])=>`${n}=${encodeURIComponent(h)}`).join("&");window.location.href=`${this.apiBaseUrl}/api/auth/callback?${e}`}else this.error="No authentication code or token received",this.loading=!1,this.message="Authentication incomplete",setTimeout(()=>{this.$router.push("/login?error=No authentication data received")},3e3)}}},m={class:"text-center p-5"},p={key:0,class:"spinner-border",role:"status"},_={key:1,class:"text-danger mt-3"};function f(t,s,r,o,e,n){return i(),a("div",m,[u("h3",null,l(e.message),1),e.loading?(i(),a("div",p)):c("",!0),e.error?(i(),a("p",_,l(e.error),1)):c("",!0)])}const A=d(g,[["render",f]]);export{A as default};
